{"version":3,"file":"demo.js","mappings":"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","sources":["webpack://ringcentral-web-phone/webpack/runtime/chunk loaded","webpack://ringcentral-web-phone/./demo/index.js","webpack://ringcentral-web-phone/external var {\"commonjs\":\"ringcentral-web-phone\",\"commonjs2\":\"ringcentral-web-phone\",\"amd\":\"ringcentral-web-phone\",\"root\":[\"RingCentral\",\"WebPhone\"]}","webpack://ringcentral-web-phone/webpack/bootstrap","webpack://ringcentral-web-phone/webpack/runtime/define property getters","webpack://ringcentral-web-phone/webpack/runtime/global","webpack://ringcentral-web-phone/webpack/runtime/hasOwnProperty shorthand","webpack://ringcentral-web-phone/webpack/runtime/make namespace object","webpack://ringcentral-web-phone/webpack/runtime/runtimeId","webpack://ringcentral-web-phone/webpack/runtime/jsonp chunk loading","webpack://ringcentral-web-phone/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","const SIP = require('sip.js');\nconst $ = require('jquery');\n\nwindow.jQuery = $;\nwindow.SIP = SIP;\n\n$(function () {\n    const bootstrap = require('bootstrap');\n    const SDK = require('ringcentral');\n    const WebPhone = require('ringcentral-web-phone') || window.RingCentral.WebPhone;\n\n    /** @type {SDK} */\n    var sdk = null;\n    var platform = null;\n    /** @type {WebPhone} */\n    var webPhone = null;\n\n    var logLevel = 0;\n    var username = null;\n    var extension = null;\n    var sipInfo = null;\n    var $app = $('#app');\n\n    var $loginTemplate = $('#template-login');\n    var $authFlowTemplate = $('#template-auth-flow');\n    var $callTemplate = $('#template-call');\n    var $incomingTemplate = $('#template-incoming');\n    var $acceptedTemplate = $('#template-accepted');\n\n    var remoteVideoElement = document.getElementById('remoteVideo');\n    var localVideoElement = document.getElementById('localVideo');\n    var activeCallInfo = '';\n    var outboundCall = true;\n    var confSessionId = '';\n\n    /**\n     * @param {jQuery|HTMLElement} $tpl\n     * @return {jQuery|HTMLElement}\n     */\n    function cloneTemplate($tpl) {\n        return $($tpl.html());\n    }\n\n    function login(server, appKey, appSecret, login, ext, password, ll) {\n        sdk = new SDK({\n            appKey,\n            appSecret,\n            server\n        });\n\n        platform = sdk.platform();\n\n        // TODO: Improve later to support international phone number country codes better\n        if (login) {\n            login = login.match(/^[+1]/) ? login : '1' + login;\n            login = login.replace(/\\W/g, '');\n        }\n\n        platform\n            .login({\n                username: login,\n                extension: ext || null,\n                password\n            })\n            .then(function () {\n                return postLogin(server, appKey, appSecret, login, ext, password, ll);\n            })\n            .catch(function (e) {\n                console.error(e.stack || e);\n            });\n    }\n\n    // Redirect function\n    function show3LeggedLogin(server, appKey, appSecret, ll) {\n        var $redirectUri = decodeURIComponent(window.location.href.split('login', 1) + 'callback.html');\n\n        console.log('The redirect uri value :', $redirectUri);\n\n        sdk = new SDK({\n            appKey,\n            appSecret,\n            server,\n            redirectUri: $redirectUri\n        });\n\n        platform = sdk.platform();\n\n        var loginUrl = platform.loginUrl();\n\n        platform\n            .loginWindow({ url: loginUrl }) // this method also allows to supply more options to control window position\n            .then(platform.login.bind(platform))\n            .then(function () {\n                return postLogin(server, appKey, appSecret, '', '', '', ll);\n            })\n            .catch(function (e) {\n                console.error(e.stack || e);\n            });\n    }\n\n    function postLogin(server, appKey, appSecret, login, ext, password, ll) {\n        logLevel = ll;\n        username = login;\n\n        localStorage.setItem('webPhoneServer', server || '');\n        localStorage.setItem('webPhoneAppKey', appKey || '');\n        localStorage.setItem('webPhoneAppSecret', appSecret || '');\n        localStorage.setItem('webPhoneLogin', login || '');\n        localStorage.setItem('webPhoneExtension', ext || '');\n        localStorage.setItem('webPhonePassword', password || '');\n        localStorage.setItem('webPhoneLogLevel', logLevel || 0);\n\n        return platform\n            .get('/restapi/v1.0/account/~/extension/~')\n            .then(function (res) {\n                extension = res.json();\n\n                console.log('Extension info', extension);\n\n                return platform.post('/client-info/sip-provision', {\n                    sipInfo: [\n                        {\n                            transport: 'WSS'\n                        }\n                    ]\n                });\n            })\n            .then(function (res) {\n                return res.json();\n            })\n            .then(register)\n            .then(makeCallForm)\n            .catch(function (e) {\n                console.error('Error in main promise chain');\n                console.error(e.stack || e);\n            });\n    }\n\n    function register(data) {\n        sipInfo = data.sipInfo[0] || data.sipInfo;\n\n        webPhone = new WebPhone(data, {\n            enableDscp: true,\n            appKey: localStorage.getItem('webPhoneAppKey'),\n            audioHelper: {\n                enabled: true,\n                incoming: 'audio/incoming.ogg',\n                outgoing: 'audio/outgoing.ogg'\n            },\n            logLevel: parseInt(logLevel, 10),\n            appName: 'WebPhoneDemo',\n            appVersion: '1.0.0',\n            media: {\n                remote: remoteVideoElement,\n                local: localVideoElement\n            },\n            enableQos: true,\n            enableMediaReportLogging: true\n            // enableTurnServers: true or false,\n            // turnServers: [{urls:'turn:192.168.0.1', username : 'turn' , credential: 'turn'}],\n            // iceTransportPolicy: \"all\" or \"relay\",\n            // iceCheckingTimeout:500\n        });\n\n        webPhone.userAgent.audioHelper.setVolume(0.3);\n        webPhone.userAgent.on('invite', onInvite);\n        webPhone.userAgent.on('connecting', function () {\n            console.log('UA connecting');\n        });\n        webPhone.userAgent.on('connected', function () {\n            console.log('UA Connected');\n        });\n        webPhone.userAgent.on('disconnected', function () {\n            console.log('UA Disconnected');\n        });\n        webPhone.userAgent.on('registered', function () {\n            console.log('UA Registered');\n        });\n        webPhone.userAgent.on('unregistered', function () {\n            console.log('UA Unregistered');\n        });\n        webPhone.userAgent.on('registrationFailed', function () {\n            console.log('UA RegistrationFailed', arguments);\n        });\n        webPhone.userAgent.on('message', function () {\n            console.log('UA Message', arguments);\n        });\n        webPhone.userAgent.transport.on('switchBackProxy', function () {\n            console.log('switching back to primary outbound proxy');\n            webPhone.userAgent.transport.reconnect(true);\n        });\n        webPhone.userAgent.transport.on('closed', function () {\n            console.log('WebSocket closed.');\n        });\n        webPhone.userAgent.transport.on('transportError', function () {\n            console.log('WebSocket transportError occured');\n        });\n        webPhone.userAgent.transport.on('wsConnectionError', function () {\n            console.log('WebSocket wsConnectionError occured');\n        });\n        return webPhone;\n    }\n\n    function onInvite(session) {\n        outboundCall = false;\n        console.log('EVENT: Invite', session.request);\n        console.log('To', session.request.to.displayName, session.request.to.friendlyName);\n        console.log('From', session.request.from.displayName, session.request.from.friendlyName);\n\n        if (session.request.headers['Alert-Info'] && session.request.headers['Alert-Info'][0].raw === 'Auto Answer') {\n            session\n                .accept()\n                .then(function () {\n                    onAccepted(session);\n                })\n                .catch(function (e) {\n                    console.error('Accept failed', e.stack || e);\n                });\n        } else {\n            var $modal = cloneTemplate($incomingTemplate).modal({\n                backdrop: 'static'\n            });\n\n            $modal.find('.answer').on('click', function () {\n                $modal.find('.before-answer').css('display', 'none');\n                $modal.find('.answered').css('display', '');\n                session\n                    .accept()\n                    .then(function () {\n                        $modal.modal('hide');\n                        onAccepted(session);\n                    })\n                    .catch(function (e) {\n                        console.error('Accept failed', e.stack || e);\n                    });\n            });\n\n            $modal.find('.decline').on('click', function () {\n                session.reject();\n                $modal.modal('hide');\n            });\n\n            $modal.find('.toVoicemail').on('click', function () {\n                session.toVoicemail();\n                $modal.modal('hide');\n            });\n\n            $modal.find('.forward-form').on('submit', function (e) {\n                e.preventDefault();\n                e.stopPropagation();\n                session\n                    .forward($modal.find('input[name=forward]').val().trim())\n                    .then(function () {\n                        console.log('Forwarded');\n                        $modal.modal('hide');\n                    })\n                    .catch(function (e) {\n                        console.error('Forward failed', e.stack || e);\n                    });\n            });\n\n            $modal.find('.reply-form').on('submit', function (e) {\n                e.preventDefault();\n                e.stopPropagation();\n                session\n                    .replyWithMessage({\n                        replyType: 0,\n                        replyText: $modal.find('input[name=reply]').val()\n                    })\n                    .then(function () {\n                        console.log('Replied');\n                        $modal.modal('hide');\n                    })\n                    .catch(function (e) {\n                        console.error('Reply failed', e.stack || e);\n                    });\n            });\n\n            session.on('rejected', function () {\n                $modal.modal('hide');\n            });\n        }\n    }\n\n    const activeCallInfoTemplate = () => ({\n        id: '',\n        from: '',\n        to: '',\n        direction: '',\n        sipData: {\n            toTag: '',\n            fromTag: ''\n        }\n    });\n\n    function captureActiveCallInfo(session) {\n        const direction = outboundCall ? 'Outbound' : 'Inbound';\n        var activeCallInfo = activeCallInfoTemplate();\n        activeCallInfo.from = session.request.from.uri.user;\n        activeCallInfo.to = session.request.to.uri.user;\n        activeCallInfo.direction = direction;\n        // FIXME:\n        activeCallInfo.id = session.dialog.id.callId;\n        activeCallInfo.sipData.fromTag = session.dialog.remoteTag;\n        activeCallInfo.sipData.toTag = session.dialog.localTag;\n        if (!localStorage.getItem('activeCallInfo')) {\n            localStorage.setItem('activeCallInfo', JSON.stringify(activeCallInfo));\n        }\n    }\n\n    function onAccepted(session) {\n        console.log('EVENT: Accepted', session.request);\n        console.log('To', session.request.to.displayName, session.request.to.friendlyName);\n        console.log('From', session.request.from.displayName, session.request.from.friendlyName);\n\n        var $modal = cloneTemplate($acceptedTemplate).modal();\n\n        var $info = $modal.find('.info').eq(0);\n        var $dtmf = $modal.find('input[name=dtmf]').eq(0);\n        var $transfer = $modal.find('input[name=transfer]').eq(0);\n        var $flip = $modal.find('input[name=flip]').eq(0);\n        var $conference = $modal.find('input[name=conference]').eq(0);\n\n        var interval = setInterval(function () {\n            var time = session.startTime ? Math.round((Date.now() - session.startTime) / 1000) + 's' : 'Ringing';\n            $info.text('time: ' + time + '\\n' + 'startTime: ' + JSON.stringify(session.startTime, null, 2) + '\\n');\n        }, 1000);\n\n        function close() {\n            clearInterval(interval);\n            $modal.modal('hide');\n        }\n\n        $modal.find('.increase-volume').on('click', function () {\n            session.userAgent.audioHelper.setVolume(\n                (session.userAgent.audioHelper.volume !== null ? session.userAgent.audioHelper.volume : 0.5) + 0.1\n            );\n        });\n\n        $modal.find('.decrease-volume').on('click', function () {\n            session.userAgent.audioHelper.setVolume(\n                (session.userAgent.audioHelper.volume !== null ? session.userAgent.audioHelper.volume : 0.5) - 0.1\n            );\n        });\n\n        $modal.find('.mute').on('click', function () {\n            session.mute();\n        });\n\n        $modal.find('.unmute').on('click', function () {\n            session.unmute();\n        });\n\n        $modal.find('.hold').on('click', function () {\n            session\n                .hold()\n                .then(function () {\n                    console.log('Holding');\n                })\n                .catch(function (e) {\n                    console.error('Holding failed', e.stack || e);\n                });\n        });\n\n        $modal.find('.unhold').on('click', function () {\n            session\n                .unhold()\n                .then(function () {\n                    console.log('UnHolding');\n                })\n                .catch(function (e) {\n                    console.error('UnHolding failed', e.stack || e);\n                });\n        });\n        $modal.find('.startRecord').on('click', function () {\n            session\n                .startRecord()\n                .then(function () {\n                    console.log('Recording Started');\n                })\n                .catch(function (e) {\n                    console.error('Recording Start failed', e.stack || e);\n                });\n        });\n\n        $modal.find('.stopRecord').on('click', function () {\n            session\n                .stopRecord()\n                .then(function () {\n                    console.log('Recording Stopped');\n                })\n                .catch(function (e) {\n                    console.error('Recording Stop failed', e.stack || e);\n                });\n        });\n\n        $modal.find('.park').on('click', function () {\n            session\n                .park()\n                .then(function () {\n                    console.log('Parked');\n                })\n                .catch(function (e) {\n                    console.error('Park failed', e.stack || e);\n                });\n        });\n\n        $modal.find('.transfer-form').on('submit', function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n            session\n                .transfer($transfer.val().trim())\n                .then(function () {\n                    console.log('Transferred');\n                    $modal.modal('hide');\n                })\n                .catch(function (e) {\n                    console.error('Transfer failed', e.stack || e);\n                });\n        });\n\n        $modal.find('.transfer-form button.warm').on('click', function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n            session.hold().then(function () {\n                console.log('Placing the call on hold, initiating attended transfer');\n                var newSession = session.userAgent.invite($transfer.val().trim());\n                newSession.on('established', function () {\n                    console.log('New call initated. Click Complete to complete the transfer');\n                    $modal.find('.transfer-form button.complete').on('click', function (e) {\n                        session\n                            .warmTransfer(newSession)\n                            .then(function () {\n                                console.log('Warm transfer completed');\n                                $modal.modal('hide');\n                            })\n                            .catch(function (e) {\n                                console.error('Transfer failed', e.stack || e);\n                            });\n                    });\n                });\n            });\n        });\n\n        $modal.find('.flip-form').on('submit', function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n            session\n                .flip($flip.val().trim())\n                .then(function () {\n                    console.log('Flipped');\n                })\n                .catch(function (e) {\n                    console.error('Flip failed', e.stack || e);\n                });\n            $flip.val('');\n        });\n\n        $modal.find('.dtmf-form').on('submit', function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n            session.dtmf($dtmf.val().trim());\n            $dtmf.val('');\n        });\n\n        var $startConfButton = $modal.find('.startConf');\n\n        $startConfButton.on('click', function (e) {\n            initConference();\n        });\n\n        $modal.find('.hangup').on('click', function () {\n            session.dispose();\n        });\n\n        session.on('established', function () {\n            console.log('Event: Established');\n            captureActiveCallInfo(session);\n        });\n        session.on('progress', function () {\n            console.log('Event: Progress');\n        });\n        session.on('rejected', function () {\n            console.log('Event: Rejected');\n            close();\n        });\n        session.on('failed', function () {\n            console.log('Event: Failed', arguments);\n            close();\n        });\n        session.on('terminated', function () {\n            console.log('Event: Terminated');\n            localStorage.setItem('activeCallInfo', '');\n            close();\n        });\n        session.on('cancel', function () {\n            console.log('Event: Cancel');\n            close();\n        });\n        session.on('refer', function () {\n            console.log('Event: Refer');\n            close();\n        });\n        session.on('replaced', function (newSession) {\n            console.log('Event: Replaced: old session', session, 'has been replaced with', newSession);\n            close();\n            onAccepted(newSession);\n        });\n        session.on('dtmf', function () {\n            console.log('Event: DTMF');\n        });\n        session.on('muted', function () {\n            console.log('Event: Muted');\n        });\n        session.on('unmuted', function () {\n            console.log('Event: Unmuted');\n        });\n        session.on('connecting', function () {\n            console.log('Event: Connecting');\n        });\n        session.on('bye', function () {\n            console.log('Event: Bye');\n            close();\n        });\n    }\n\n    function makeCall(number, homeCountryId) {\n        outboundCall = true;\n        homeCountryId =\n            homeCountryId ||\n            (extension &&\n                extension.regionalSettings &&\n                extension.regionalSettings.homeCountry &&\n                extension.regionalSettings.homeCountry.id) ||\n            null;\n\n        var session = webPhone.userAgent.invite(number, {\n            fromNumber: username,\n            homeCountryId\n        });\n\n        onAccepted(session);\n    }\n\n    function switchCall() {\n        var activeCallItem = JSON.parse(localStorage.getItem('activeCallInfo'));\n        console.log('Switching active call to current tab: ', activeCallItem);\n        var session = webPhone.userAgent.switchFrom(activeCallItem);\n        onAccepted(session);\n    }\n\n    var onConference = false;\n\n    function initConference() {\n        if (!onConference) {\n            getPresenceActiveCalls().then((res) => {\n                var response = res.json();\n                var pId = response.activeCalls[0].partyId;\n                var tId = response.activeCalls[0].telephonySessionId;\n                getConfVoiceToken(pId, tId).then((voiceToken) => {\n                    startConferenceCall(voiceToken, pId, tId);\n                    onConference = true;\n                });\n            });\n        }\n    }\n\n    function getPresenceActiveCalls() {\n        return platform.get('/restapi/v1.0/account/~/extension/~/presence?detailedTelephonyState=true');\n    }\n\n    function getConfVoiceToken(pId, tId) {\n        return platform.post('/restapi/v1.0/account/~/telephony/conference', {}).then((res) => {\n            confSessionId = res.json().session.id;\n            return res.json().session.voiceCallToken;\n        });\n    }\n\n    function startConferenceCall(number, pId, tId) {\n        var session = webPhone.userAgent.invite(number, {\n            fromNumber: username\n        });\n        session.on('established', function () {\n            onAccepted(session);\n            console.log('Conference call started');\n            bringIn(tId, pId)\n                .then((response) => {\n                    console.log('Adding call to conference succesful', response.json());\n                })\n                .catch(function (e) {\n                    console.error('Conference call failed', e.stack || e);\n                });\n        });\n    }\n\n    function bringIn(tId, pId) {\n        var url = '/restapi/v1.0/account/accountId/telephony/sessions/' + confSessionId + '/parties/bring-in';\n        return platform.post(url, {\n            telephonySessionId: tId,\n            partyId: pId\n        });\n    }\n\n    function makeCallForm() {\n        var $form = cloneTemplate($callTemplate);\n\n        var $number = $form.find('input[name=number]').eq(0);\n        var $homeCountry = $form.find('input[name=homeCountry]').eq(0);\n        var $username = $form.find('.username').eq(0);\n        var $logout = $form.find('.logout').eq(0);\n        var $switch = $form.find('.switch').eq(0);\n\n        $username.html(\n            '<dl>' +\n                '<dt>Contact</dt><dd>' +\n                extension.contact.firstName +\n                ' ' +\n                extension.contact.lastName +\n                '</dd>' +\n                '<dt>Company</dt><dd>' +\n                (extension.contact.company || '?') +\n                '</dd>' +\n                '<dt>Phone Number</dt><dd>' +\n                username +\n                '</dd>' +\n                '</dl>'\n        );\n\n        $logout.on('click', function (e) {\n            webPhone.userAgent.unregister();\n            e.preventDefault();\n            location.reload();\n        });\n\n        $switch.on('click', function (e) {\n            switchCall();\n        });\n\n        $number.val(localStorage.getItem('webPhoneLastNumber') || '');\n\n        $form.on('submit', function (e) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            localStorage.setItem('webPhoneLastNumber', $number.val() || '');\n\n            makeCall($number.val(), $homeCountry.val());\n        });\n\n        $app.empty().append($form);\n    }\n\n    function makeLoginForm() {\n        var $form = cloneTemplate($loginTemplate);\n        var $authForm = cloneTemplate($authFlowTemplate);\n\n        var $server = $authForm.find('input[name=server]').eq(0);\n        var $appKey = $authForm.find('input[name=appKey]').eq(0);\n        var $appSecret = $authForm.find('input[name=appSecret]').eq(0);\n        var $login = $form.find('input[name=login]').eq(0);\n        var $ext = $form.find('input[name=extension]').eq(0);\n        var $password = $form.find('input[name=password]').eq(0);\n        var $logLevel = $authForm.find('select[name=logLevel]').eq(0);\n\n        $server.val(localStorage.getItem('webPhoneServer') || SDK.server.sandbox);\n        $appKey.val(localStorage.getItem('webPhoneAppKey') || '');\n        $appSecret.val(localStorage.getItem('webPhoneAppSecret') || '');\n        $login.val(localStorage.getItem('webPhoneLogin') || '');\n        $ext.val(localStorage.getItem('webPhoneExtension') || '');\n        $password.val(localStorage.getItem('webPhonePassword') || '');\n        $logLevel.val(localStorage.getItem('webPhoneLogLevel') || logLevel);\n\n        $form.on('submit', function (e) {\n            console.log('Normal Flow');\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            login(\n                $server.val(),\n                $appKey.val(),\n                $appSecret.val(),\n                $login.val(),\n                $ext.val(),\n                $password.val(),\n                $logLevel.val()\n            );\n        });\n        //\n        $authForm.on('submit', function (e) {\n            console.log('Authorized Flow');\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            show3LeggedLogin($server.val(), $appKey.val(), $appSecret.val(), $logLevel.val());\n        });\n\n        $app.empty().append($authForm).append($form);\n    }\n\n    makeLoginForm();\n});\n","module.exports = undefined;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.j = 577;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t577: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkringcentral_web_phone\"] = self[\"webpackChunkringcentral_web_phone\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [948], () => (__webpack_require__(7575)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","SIP","$","window","jQuery","SDK","WebPhone","RingCentral","sdk","platform","webPhone","logLevel","username","extension","$app","$loginTemplate","$authFlowTemplate","$callTemplate","$incomingTemplate","$acceptedTemplate","remoteVideoElement","document","getElementById","localVideoElement","outboundCall","confSessionId","cloneTemplate","$tpl","html","postLogin","server","appKey","appSecret","login","ext","password","ll","localStorage","setItem","get","then","res","json","console","log","post","sipInfo","transport","register","makeCallForm","catch","e","error","stack","data","enableDscp","getItem","audioHelper","enabled","incoming","outgoing","parseInt","appName","appVersion","media","remote","local","enableQos","enableMediaReportLogging","userAgent","setVolume","on","onInvite","arguments","reconnect","session","request","to","displayName","friendlyName","from","headers","raw","accept","onAccepted","$modal","modal","backdrop","find","css","reject","toVoicemail","preventDefault","stopPropagation","forward","val","trim","replyWithMessage","replyType","replyText","$info","eq","$dtmf","$transfer","$flip","interval","setInterval","time","startTime","Math","round","Date","now","text","JSON","stringify","close","clearInterval","volume","mute","unmute","hold","unhold","startRecord","stopRecord","park","transfer","newSession","invite","warmTransfer","flip","dtmf","onConference","response","pId","activeCalls","partyId","tId","telephonySessionId","id","voiceCallToken","voiceToken","number","fromNumber","url","bringIn","startConferenceCall","dispose","direction","activeCallInfo","sipData","toTag","fromTag","uri","user","dialog","callId","remoteTag","localTag","captureActiveCallInfo","$form","$authForm","$server","$appKey","$appSecret","$login","$ext","$password","$logLevel","$number","$homeCountry","$username","$logout","$switch","contact","firstName","lastName","company","unregister","location","reload","activeCallItem","parse","switchFrom","homeCountryId","regionalSettings","homeCountry","empty","append","sandbox","match","replace","$redirectUri","decodeURIComponent","href","split","redirectUri","loginUrl","loginWindow","bind","show3LeggedLogin","module","exports","undefined","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","call","m","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","length","fulfilled","j","Object","keys","every","key","splice","r","d","definition","o","defineProperty","enumerable","g","globalThis","this","Function","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","value","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","forEach","push","__webpack_exports__"],"sourceRoot":""}