{"version":3,"file":"demo.js","mappings":"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","sources":["webpack://ringcentral-web-phone/webpack/runtime/chunk loaded","webpack://ringcentral-web-phone/./demo/index.js","webpack://ringcentral-web-phone/external var {\"commonjs\":\"ringcentral-web-phone\",\"commonjs2\":\"ringcentral-web-phone\",\"amd\":\"ringcentral-web-phone\",\"root\":[\"RingCentral\",\"WebPhone\"]}","webpack://ringcentral-web-phone/webpack/bootstrap","webpack://ringcentral-web-phone/webpack/runtime/define property getters","webpack://ringcentral-web-phone/webpack/runtime/global","webpack://ringcentral-web-phone/webpack/runtime/hasOwnProperty shorthand","webpack://ringcentral-web-phone/webpack/runtime/make namespace object","webpack://ringcentral-web-phone/webpack/runtime/node module decorator","webpack://ringcentral-web-phone/webpack/runtime/runtimeId","webpack://ringcentral-web-phone/webpack/runtime/jsonp chunk loading","webpack://ringcentral-web-phone/webpack/startup"],"sourcesContent":["var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar [chunkIds, fn, priority] = deferred[i];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","const SIP = require('sip.js');\nconst $ = require('jquery');\n\nwindow.jQuery = $;\nwindow.SIP = SIP;\n\n$(function() {\n    const SDK = require('@ringcentral/sdk').SDK;\n    const WebPhone = require('ringcentral-web-phone') || window.RingCentral.WebPhone;\n\n    /** @type {SDK} */\n    var sdk = null;\n    var platform = null;\n    /** @type {WebPhone} */\n    var webPhone = null;\n\n    var logLevel = 0;\n    var username = null;\n    var extension = null;\n    var sipInfo = null;\n    var $app = $('#app');\n\n    var $loginTemplate = $('#template-login');\n    var $authFlowTemplate = $('#template-auth-flow');\n    var $callTemplate = $('#template-call');\n    var $incomingTemplate = $('#template-incoming');\n    var $acceptedTemplate = $('#template-accepted');\n\n    var remoteVideoElement = document.getElementById('remoteVideo');\n    var localVideoElement = document.getElementById('localVideo');\n    var activeCallInfo = '';\n    var outboundCall = true;\n    var confSessionId = '';\n\n    /**\n     * @param {jQuery|HTMLElement} $tpl\n     * @return {jQuery|HTMLElement}\n     */\n    function cloneTemplate($tpl) {\n        return $($tpl.html());\n    }\n\n    function login(server, clientId, clientSecret, username, extension, password, ll) {\n        sdk = new SDK({\n            clientId,\n            clientSecret,\n            server\n        });\n\n        platform = sdk.platform();\n\n        // TODO: Improve later to support international phone number country codes better\n        if (username) {\n            username = username.match(/^[+1]/) ? username : '1' + username;\n            username = username.replace(/\\W/g, '');\n        }\n\n        platform\n            .login({\n                username,\n                extension: extension || null,\n                password\n            })\n            .then(function() {\n                return postLogin(server, clientId, clientSecret, username, extension, password, ll);\n            })\n            .catch(function(e) {\n                console.error(e.stack || e);\n            });\n    }\n\n    // Redirect function\n    function show3LeggedLogin(server, clientId, clientSecret, ll) {\n        var $redirectUri = decodeURIComponent(window.location.href.split('login', 1) + 'callback.html');\n\n        console.log('The redirect uri value :', $redirectUri);\n\n        sdk = new SDK({\n            clientId,\n            clientSecret,\n            server,\n            redirectUri: $redirectUri\n        });\n\n        platform = sdk.platform();\n\n        var loginUrl = platform.loginUrl();\n\n        platform\n            .loginWindow({url: loginUrl}) // this method also allows to supply more options to control window position\n            .then(platform.login.bind(platform))\n            .then(function() {\n                return postLogin(server, clientId, clientSecret, '', '', '', ll);\n            })\n            .catch(function(e) {\n                console.error(e.stack || e);\n            });\n    }\n\n    function postLogin(server, clientId, clientSecret, username, ext, password, ll) {\n        logLevel = ll;\n\n        localStorage.setItem('webPhoneServer', server || '');\n        localStorage.setItem('webPhoneclientId', clientId || '');\n        localStorage.setItem('webPhoneclientSecret', clientSecret || '');\n        localStorage.setItem('webPhoneLogin', username || '');\n        localStorage.setItem('webPhoneExtension', ext || '');\n        localStorage.setItem('webPhonePassword', password || '');\n        localStorage.setItem('webPhoneLogLevel', logLevel || 0);\n\n        return platform\n            .get('/restapi/v1.0/account/~/extension/~')\n            .then(res => res.json())\n            .then(function(res) {\n                extension = res;\n                console.log('Extension info', extension);\n\n                return platform.post('/restapi/v1.0/client-info/sip-provision', {\n                    sipInfo: [\n                        {\n                            transport: 'WSS'\n                        }\n                    ]\n                });\n            })\n            .then(res => res.json())\n            .then(register)\n            .then(makeCallForm)\n            .catch(function(e) {\n                console.error('Error in main promise chain');\n                console.error(e.stack || e);\n            });\n    }\n\n    function register(data) {\n        sipInfo = data.sipInfo[0] || data.sipInfo;\n\n        webPhone = new WebPhone(data, {\n            enableDscp: true,\n            clientId: localStorage.getItem('webPhoneclientId'),\n            audioHelper: {\n                enabled: true,\n                incoming: 'audio/incoming.ogg',\n                outgoing: 'audio/outgoing.ogg'\n            },\n            logLevel: parseInt(logLevel, 10),\n            appName: 'WebPhoneDemo',\n            appVersion: '1.0.0',\n            media: {\n                remote: remoteVideoElement,\n                local: localVideoElement\n            },\n            enableQos: true,\n            enableMediaReportLogging: true\n            // enableTurnServers: true or false,\n            // turnServers: [{urls:'turn:192.168.0.1', username : 'turn' , credential: 'turn'}],\n            // iceTransportPolicy: \"all\" or \"relay\",\n            // iceCheckingTimeout:500\n        });\n\n        webPhone.userAgent.audioHelper.setVolume(0.3);\n        webPhone.userAgent.on('invite', onInvite);\n        webPhone.userAgent.on('connecting', function() {\n            console.log('UA connecting');\n        });\n        webPhone.userAgent.on('connected', function() {\n            console.log('UA Connected');\n        });\n        webPhone.userAgent.on('disconnected', function() {\n            console.log('UA Disconnected');\n        });\n        webPhone.userAgent.on('registered', function() {\n            console.log('UA Registered');\n        });\n        webPhone.userAgent.on('unregistered', function() {\n            console.log('UA Unregistered');\n        });\n        webPhone.userAgent.on('registrationFailed', function() {\n            console.log('UA RegistrationFailed', arguments);\n        });\n        webPhone.userAgent.on('message', function() {\n            console.log('UA Message', arguments);\n        });\n        webPhone.userAgent.transport.on('switchBackProxy', function() {\n            console.log('switching back to primary outbound proxy');\n            webPhone.userAgent.transport.reconnect(true);\n        });\n        webPhone.userAgent.transport.on('closed', function() {\n            console.log('WebSocket closed.');\n        });\n        webPhone.userAgent.transport.on('transportError', function() {\n            console.log('WebSocket transportError occured');\n        });\n        webPhone.userAgent.transport.on('wsConnectionError', function() {\n            console.log('WebSocket wsConnectionError occured');\n        });\n        return webPhone;\n    }\n\n    function onInvite(session) {\n        outboundCall = false;\n        console.log('EVENT: Invite', session.request);\n        console.log('To', session.request.to.displayName, session.request.to.friendlyName);\n        console.log('From', session.request.from.displayName, session.request.from.friendlyName);\n\n        if (session.request.headers['Alert-Info'] && session.request.headers['Alert-Info'][0].raw === 'Auto Answer') {\n            session\n                .accept()\n                .then(function() {\n                    onAccepted(session);\n                })\n                .catch(function(e) {\n                    console.error('Accept failed', e.stack || e);\n                });\n        } else {\n            var $modal = cloneTemplate($incomingTemplate).modal({\n                backdrop: 'static'\n            });\n\n            $modal.find('.answer').on('click', function() {\n                $modal.find('.before-answer').css('display', 'none');\n                $modal.find('.answered').css('display', '');\n                session\n                    .accept()\n                    .then(function() {\n                        $modal.modal('hide');\n                        onAccepted(session);\n                    })\n                    .catch(function(e) {\n                        console.error('Accept failed', e.stack || e);\n                    });\n            });\n\n            $modal.find('.decline').on('click', function() {\n                session.reject();\n                $modal.modal('hide');\n            });\n\n            $modal.find('.toVoicemail').on('click', function() {\n                session.toVoicemail();\n                $modal.modal('hide');\n            });\n\n            $modal.find('.forward-form').on('submit', function(e) {\n                e.preventDefault();\n                e.stopPropagation();\n                session\n                    .forward(\n                        $modal\n                            .find('input[name=forward]')\n                            .val()\n                            .trim()\n                    )\n                    .then(function() {\n                        console.log('Forwarded');\n                        $modal.modal('hide');\n                    })\n                    .catch(function(e) {\n                        console.error('Forward failed', e.stack || e);\n                    });\n            });\n\n            $modal.find('.reply-form').on('submit', function(e) {\n                e.preventDefault();\n                e.stopPropagation();\n                session\n                    .replyWithMessage({\n                        replyType: 0,\n                        replyText: $modal.find('input[name=reply]').val()\n                    })\n                    .then(function() {\n                        console.log('Replied');\n                        $modal.modal('hide');\n                    })\n                    .catch(function(e) {\n                        console.error('Reply failed', e.stack || e);\n                    });\n            });\n\n            session.on('rejected', function() {\n                $modal.modal('hide');\n            });\n        }\n    }\n\n    const activeCallInfoTemplate = () => ({\n        id: '',\n        from: '',\n        to: '',\n        direction: '',\n        sipData: {\n            toTag: '',\n            fromTag: ''\n        }\n    });\n\n    function captureActiveCallInfo(session) {\n        const direction = outboundCall ? 'Outbound' : 'Inbound';\n        var activeCallInfo = activeCallInfoTemplate();\n        activeCallInfo.from = session.request.from.uri.user;\n        activeCallInfo.to = session.request.to.uri.user;\n        activeCallInfo.direction = direction;\n        activeCallInfo.id = session.dialog.id.callId;\n        activeCallInfo.sipData.fromTag = session.dialog.remoteTag;\n        activeCallInfo.sipData.toTag = session.dialog.localTag;\n        if (!localStorage.getItem('activeCallInfo')) {\n            localStorage.setItem('activeCallInfo', JSON.stringify(activeCallInfo));\n        }\n    }\n\n    function onAccepted(session) {\n        console.log('EVENT: Accepted', session.request);\n        console.log('To', session.request.to.displayName, session.request.to.friendlyName);\n        console.log('From', session.request.from.displayName, session.request.from.friendlyName);\n\n        var $modal = cloneTemplate($acceptedTemplate).modal();\n\n        var $info = $modal.find('.info').eq(0);\n        var $dtmf = $modal.find('input[name=dtmf]').eq(0);\n        var $transfer = $modal.find('input[name=transfer]').eq(0);\n        var $flip = $modal.find('input[name=flip]').eq(0);\n        var $conference = $modal.find('input[name=conference]').eq(0);\n\n        var interval = setInterval(function() {\n            var time = session.startTime ? Math.round((Date.now() - session.startTime) / 1000) + 's' : 'Ringing';\n            $info.text('time: ' + time + '\\nstartTime: ' + JSON.stringify(session.startTime, null, 2) + '\\n');\n        }, 1000);\n\n        function close() {\n            clearInterval(interval);\n            $modal.modal('hide');\n        }\n\n        $modal.find('.increase-volume').on('click', function() {\n            session.userAgent.audioHelper.setVolume(\n                (session.userAgent.audioHelper.volume !== null ? session.userAgent.audioHelper.volume : 0.5) + 0.1\n            );\n        });\n\n        $modal.find('.decrease-volume').on('click', function() {\n            session.userAgent.audioHelper.setVolume(\n                (session.userAgent.audioHelper.volume !== null ? session.userAgent.audioHelper.volume : 0.5) - 0.1\n            );\n        });\n\n        $modal.find('.mute').on('click', function() {\n            session.mute();\n        });\n\n        $modal.find('.unmute').on('click', function() {\n            session.unmute();\n        });\n\n        $modal.find('.hold').on('click', function() {\n            session\n                .hold()\n                .then(function() {\n                    console.log('Holding');\n                })\n                .catch(function(e) {\n                    console.error('Holding failed', e.stack || e);\n                });\n        });\n\n        $modal.find('.unhold').on('click', function() {\n            session\n                .unhold()\n                .then(function() {\n                    console.log('UnHolding');\n                })\n                .catch(function(e) {\n                    console.error('UnHolding failed', e.stack || e);\n                });\n        });\n        $modal.find('.startRecord').on('click', function() {\n            session\n                .startRecord()\n                .then(function() {\n                    console.log('Recording Started');\n                })\n                .catch(function(e) {\n                    console.error('Recording Start failed', e.stack || e);\n                });\n        });\n\n        $modal.find('.stopRecord').on('click', function() {\n            session\n                .stopRecord()\n                .then(function() {\n                    console.log('Recording Stopped');\n                })\n                .catch(function(e) {\n                    console.error('Recording Stop failed', e.stack || e);\n                });\n        });\n\n        $modal.find('.park').on('click', function() {\n            session\n                .park()\n                .then(function() {\n                    console.log('Parked');\n                })\n                .catch(function(e) {\n                    console.error('Park failed', e.stack || e);\n                });\n        });\n\n        $modal.find('.transfer-form').on('submit', function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            session\n                .transfer($transfer.val().trim())\n                .then(function() {\n                    console.log('Transferred');\n                    $modal.modal('hide');\n                })\n                .catch(function(e) {\n                    console.error('Transfer failed', e.stack || e);\n                });\n        });\n\n        $modal.find('.transfer-form button.warm').on('click', function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            session.hold().then(function() {\n                console.log('Placing the call on hold, initiating attended transfer');\n                var newSession = session.userAgent.invite($transfer.val().trim());\n                newSession.once('established', function() {\n                    console.log('New call initated. Click Complete to complete the transfer');\n                    $modal.find('.transfer-form button.complete').on('click', function(e) {\n                        session\n                            .warmTransfer(newSession)\n                            .then(function() {\n                                console.log('Warm transfer completed');\n                            })\n                            .catch(function(e) {\n                                console.error('Transfer failed', e.stack || e);\n                            });\n                    });\n                });\n            });\n        });\n\n        $modal.find('.flip-form').on('submit', function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            session\n                .flip($flip.val().trim())\n                .then(function() {\n                    console.log('Flipped');\n                })\n                .catch(function(e) {\n                    console.error('Flip failed', e.stack || e);\n                });\n            $flip.val('');\n        });\n\n        $modal.find('.dtmf-form').on('submit', function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n            session.dtmf($dtmf.val().trim());\n            $dtmf.val('');\n        });\n\n        var $startConfButton = $modal.find('.startConf');\n\n        $startConfButton.on('click', function(e) {\n            initConference();\n        });\n\n        $modal.find('.hangup').on('click', function() {\n            session.dispose();\n        });\n\n        session.on('established', function() {\n            console.log('Event: Established');\n            captureActiveCallInfo(session);\n        });\n        session.on('progress', function() {\n            console.log('Event: Progress');\n        });\n        session.on('rejected', function() {\n            console.log('Event: Rejected');\n            close();\n        });\n        session.on('failed', function() {\n            console.log('Event: Failed', arguments);\n            close();\n        });\n        session.on('terminated', function() {\n            console.log('Event: Terminated');\n            localStorage.setItem('activeCallInfo', '');\n            close();\n        });\n        session.on('cancel', function() {\n            console.log('Event: Cancel');\n            close();\n        });\n        session.on('refer', function() {\n            console.log('Event: Refer');\n            close();\n        });\n        session.on('replaced', function(newSession) {\n            console.log('Event: Replaced: old session', session, 'has been replaced with', newSession);\n            close();\n            onAccepted(newSession);\n        });\n        session.on('dtmf', function() {\n            console.log('Event: DTMF');\n        });\n        session.on('muted', function() {\n            console.log('Event: Muted');\n        });\n        session.on('unmuted', function() {\n            console.log('Event: Unmuted');\n        });\n        session.on('connecting', function() {\n            console.log('Event: Connecting');\n        });\n        session.on('bye', function() {\n            console.log('Event: Bye');\n            close();\n        });\n    }\n\n    function makeCall(number, homeCountryId) {\n        outboundCall = true;\n        homeCountryId =\n            homeCountryId ||\n            (extension &&\n                extension.regionalSettings &&\n                extension.regionalSettings.homeCountry &&\n                extension.regionalSettings.homeCountry.id) ||\n            null;\n\n        var session = webPhone.userAgent.invite(number, {\n            fromNumber: username,\n            homeCountryId\n        });\n\n        onAccepted(session);\n    }\n\n    function switchCall() {\n        var activeCallItem = JSON.parse(localStorage.getItem('activeCallInfo'));\n        console.log('Switching active call to current tab: ', activeCallItem);\n        var session = webPhone.userAgent.switchFrom(activeCallItem);\n        onAccepted(session);\n    }\n\n    var onConference = false;\n\n    function initConference() {\n        if (!onConference) {\n            getPresenceActiveCalls()\n                .then(res => res.json())\n                .then(response => {\n                    var pId = response.activeCalls[0].partyId;\n                    var tId = response.activeCalls[0].telephonySessionId;\n                    getConfVoiceToken(pId, tId).then(voiceToken => {\n                        startConferenceCall(voiceToken, pId, tId);\n                        onConference = true;\n                    });\n                });\n        }\n    }\n\n    function getPresenceActiveCalls() {\n        return platform.get('/restapi/v1.0/account/~/extension/~/presence?detailedTelephonyState=true');\n    }\n\n    function getConfVoiceToken(pId, tId) {\n        return platform\n            .post('/restapi/v1.0/account/~/telephony/conference', {})\n            .then(res => res.json())\n            .then(res => {\n                confSessionId = res.session.id;\n                return res.session.voiceCallToken;\n            });\n    }\n\n    function startConferenceCall(number, pId, tId) {\n        var session = webPhone.userAgent.invite(number, {\n            fromNumber: username\n        });\n        session.on('established', function() {\n            onAccepted(session);\n            console.log('Conference call started');\n            bringIn(tId, pId)\n                .then(res => res.json())\n                .then(response => {\n                    console.log('Adding call to conference succesful', response);\n                })\n                .catch(function(e) {\n                    console.error('Conference call failed', e.stack || e);\n                });\n        });\n    }\n\n    function bringIn(tId, pId) {\n        var url = '/restapi/v1.0/account/accountId/telephony/sessions/' + confSessionId + '/parties/bring-in';\n        return platform.post(url, {\n            telephonySessionId: tId,\n            partyId: pId\n        });\n    }\n\n    function makeCallForm() {\n        var $form = cloneTemplate($callTemplate);\n\n        var $number = $form.find('input[name=number]').eq(0);\n        var $homeCountry = $form.find('input[name=homeCountry]').eq(0);\n        var $username = $form.find('.username').eq(0);\n        var $logout = $form.find('.logout').eq(0);\n        var $switch = $form.find('.switch').eq(0);\n\n        $username.html(\n            '<dl>' +\n                '<dt>Contact</dt><dd>' +\n                extension.contact.firstName +\n                ' ' +\n                extension.contact.lastName +\n                '</dd>' +\n                '<dt>Company</dt><dd>' +\n                (extension.contact.company || '?') +\n                '</dd>' +\n                '<dt>Phone Number</dt><dd>' +\n                username +\n                '</dd>' +\n                '</dl>'\n        );\n\n        $logout.on('click', function(e) {\n            webPhone.userAgent.unregister();\n            e.preventDefault();\n            location.reload();\n        });\n\n        $switch.on('click', function(e) {\n            switchCall();\n        });\n\n        $number.val(localStorage.getItem('webPhoneLastNumber') || '');\n\n        $form.on('submit', function(e) {\n            e.preventDefault();\n            e.stopPropagation();\n\n            localStorage.setItem('webPhoneLastNumber', $number.val() || '');\n\n            makeCall($number.val(), $homeCountry.val());\n        });\n\n        $app.empty().append($form);\n    }\n\n    function makeLoginForm() {\n        var $form = cloneTemplate($loginTemplate);\n        var $authForm = cloneTemplate($authFlowTemplate);\n\n        var $server = $authForm.find('input[name=server]').eq(0);\n        var $clientId = $authForm.find('input[name=clientId]').eq(0);\n        var $clientSecret = $authForm.find('input[name=clientSecret]').eq(0);\n        var $username = $form.find('input[name=username]').eq(0);\n        var $ext = $form.find('input[name=extension]').eq(0);\n        var $password = $form.find('input[name=password]').eq(0);\n        var $logLevel = $authForm.find('select[name=logLevel]').eq(0);\n\n        $server.val(localStorage.getItem('webPhoneServer') || SDK.server.sandbox);\n        $clientId.val(localStorage.getItem('webPhoneclientId') || '');\n        $clientSecret.val(localStorage.getItem('webPhoneclientSecret') || '');\n        $username.val(localStorage.getItem('webPhoneLogin') || '');\n        $ext.val(localStorage.getItem('webPhoneExtension') || '');\n        $password.val(localStorage.getItem('webPhonePassword') || '');\n        $logLevel.val(localStorage.getItem('webPhoneLogLevel') || logLevel);\n\n        $form.on('submit', function(e) {\n            console.log('Normal Flow');\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            login(\n                $server.val(),\n                $clientId.val(),\n                $clientSecret.val(),\n                $username.val(),\n                $ext.val(),\n                $password.val(),\n                $logLevel.val()\n            );\n        });\n        //\n        $authForm.on('submit', function(e) {\n            console.log('Authorized Flow');\n\n            e.preventDefault();\n            e.stopPropagation();\n\n            show3LeggedLogin($server.val(), $clientId.val(), $clientSecret.val(), $logLevel.val());\n        });\n\n        $app.empty()\n            .append($authForm)\n            .append($form);\n    }\n\n    makeLoginForm();\n});\n","module.exports = undefined;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","__webpack_require__.j = 577;","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t577: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = (chunkId) => (installedChunks[chunkId] === 0);\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = (parentChunkLoadingFunction, data) => {\n\tvar [chunkIds, moreModules, runtime] = data;\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some((id) => (installedChunks[id] !== 0))) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunkringcentral_web_phone\"] = self[\"webpackChunkringcentral_web_phone\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [948], () => (__webpack_require__(7575)))\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["deferred","SIP","$","window","jQuery","SDK","WebPhone","RingCentral","sdk","platform","webPhone","logLevel","extension","$app","$loginTemplate","$authFlowTemplate","$callTemplate","$incomingTemplate","$acceptedTemplate","remoteVideoElement","document","getElementById","localVideoElement","outboundCall","confSessionId","cloneTemplate","$tpl","html","postLogin","server","clientId","clientSecret","username","ext","password","ll","localStorage","setItem","get","then","res","json","console","log","post","sipInfo","transport","register","makeCallForm","catch","e","error","stack","data","enableDscp","getItem","audioHelper","enabled","incoming","outgoing","parseInt","appName","appVersion","media","remote","local","enableQos","enableMediaReportLogging","userAgent","setVolume","on","onInvite","arguments","reconnect","session","request","to","displayName","friendlyName","from","headers","raw","accept","onAccepted","$modal","modal","backdrop","find","css","reject","toVoicemail","preventDefault","stopPropagation","forward","val","trim","replyWithMessage","replyType","replyText","$info","eq","$dtmf","$transfer","$flip","interval","setInterval","time","startTime","Math","round","Date","now","text","JSON","stringify","close","clearInterval","volume","mute","unmute","hold","unhold","startRecord","stopRecord","park","transfer","newSession","invite","once","warmTransfer","flip","dtmf","onConference","response","pId","activeCalls","partyId","tId","telephonySessionId","id","voiceCallToken","voiceToken","number","fromNumber","url","bringIn","startConferenceCall","dispose","direction","activeCallInfo","sipData","toTag","fromTag","uri","user","dialog","callId","remoteTag","localTag","captureActiveCallInfo","$form","$authForm","$server","$clientId","$clientSecret","$username","$ext","$password","$logLevel","$number","$homeCountry","$logout","$switch","contact","firstName","lastName","company","unregister","location","reload","activeCallItem","parse","switchFrom","homeCountryId","regionalSettings","homeCountry","empty","append","sandbox","match","replace","login","$redirectUri","decodeURIComponent","href","split","redirectUri","loginUrl","loginWindow","bind","show3LeggedLogin","module","exports","undefined","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","loaded","__webpack_modules__","call","m","O","result","chunkIds","fn","priority","notFulfilled","Infinity","i","length","fulfilled","j","Object","keys","every","key","splice","r","d","definition","o","defineProperty","enumerable","g","globalThis","this","Function","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","value","nmd","paths","children","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","moreModules","runtime","some","chunkLoadingGlobal","self","forEach","push","__webpack_exports__"],"sourceRoot":""}